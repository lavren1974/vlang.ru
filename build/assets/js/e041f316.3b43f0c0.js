"use strict";(self.webpackChunkvlang_ru=self.webpackChunkvlang_ru||[]).push([[5874],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>u});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),d=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=d(e.components);return r.createElement(p.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=d(t),u=a,f=m["".concat(p,".").concat(u)]||m[u]||s[u]||i;return t?r.createElement(f,o(o({ref:n},c),{},{components:t})):r.createElement(f,o({ref:n},c))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var d=2;d<i;d++)o[d]=t[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},1520:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>s,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var r=t(7462),a=(t(7294),t(3905));const i={sidebar_position:12},o="Limited operator overloading",l={unversionedId:"advanced/limited-operator-overloading",id:"advanced/limited-operator-overloading",title:"Limited operator overloading",description:"Operator overloading goes against V's philosophy of simplicity and predictability.",source:"@site/docs/advanced/limited-operator-overloading.md",sourceDirName:"advanced",slug:"/advanced/limited-operator-overloading",permalink:"/docs/advanced/limited-operator-overloading",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/advanced/limited-operator-overloading.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"Compile-time reflection",permalink:"/docs/advanced/compile-time-reflection"},next:{title:"Inline assembly",permalink:"/docs/advanced/inline-assembly"}},p={},d=[],c={toc:d};function s(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"limited-operator-overloading"},"Limited operator overloading"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-v"},'struct Vec {\n    x int\n    y int\n}\n\nfn (a Vec) str() string {\n    return \'{$a.x, $a.y}\'\n}\n\nfn (a Vec) + (b Vec) Vec {\n    return Vec{a.x + b.x, a.y + b.y}\n}\n\nfn (a Vec) - (b Vec) Vec {\n    return Vec{a.x - b.x, a.y - b.y}\n}\n\nfn main() {\n    a := Vec{2, 3}\n    b := Vec{4, 5}\n    mut c := Vec{1, 2}\n    println(a + b) // "{6, 8}"\n    println(a - b) // "{-2, -2}"\n    c += a\n    println(c) // "{3, 5}"\n}\n')),(0,a.kt)("p",null,"Operator overloading goes against V's philosophy of simplicity and predictability.\nBut since scientific and graphical applications are among V's domains,\noperator overloading is an important feature to have in order to improve readability:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"a.add(b).add(c.mul(d))")," is a lot less readable than ",(0,a.kt)("inlineCode",{parentName:"p"},"a + b + c * d"),"."),(0,a.kt)("p",null,"To improve safety and maintainability, operator overloading is limited:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It's only possible to overload ",(0,a.kt)("inlineCode",{parentName:"li"},"+, -, *, /, %, <, >, ==, !=, <=, >=")," operators."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"==")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"!=")," are self generated by the compiler but can be overridden."),(0,a.kt)("li",{parentName:"ul"},"Calling other functions inside operator functions is not allowed."),(0,a.kt)("li",{parentName:"ul"},"Operator functions can't modify their arguments."),(0,a.kt)("li",{parentName:"ul"},"When using ",(0,a.kt)("inlineCode",{parentName:"li"},"<")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"==")," operators, the return type must be ",(0,a.kt)("inlineCode",{parentName:"li"},"bool"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"!="),", ",(0,a.kt)("inlineCode",{parentName:"li"},">"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"<=")," and ",(0,a.kt)("inlineCode",{parentName:"li"},">=")," are auto generated when ",(0,a.kt)("inlineCode",{parentName:"li"},"==")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"<")," are defined."),(0,a.kt)("li",{parentName:"ul"},"Both arguments must have the same type (just like with all operators in V)."),(0,a.kt)("li",{parentName:"ul"},"Assignment operators (",(0,a.kt)("inlineCode",{parentName:"li"},"*="),", ",(0,a.kt)("inlineCode",{parentName:"li"},"+="),", ",(0,a.kt)("inlineCode",{parentName:"li"},"/="),", etc)\nare auto generated when the corresponding operators are defined and operands are of the same type.")))}s.isMDXComponent=!0}}]);